!function(e,t,a,r,i,s,n,p,_,l){a(t).ready(function(){var v=s.get_url_param("tribe_paged"),o=a("#tribe-events > .tribe-events-venue");if(v&&(n.paged=v),p.pushstate&&!p.map_view()){var u="action=tribe_list&tribe_paged="+n.paged;r.params.length&&(u=u+"&"+r.params),n.category&&(u=u+"&tribe_event_category="+n.category),s.is_featured()&&(u+="&featured=1"),a(t.getElementById("tribe-events")).is(".tribe-events-shortcode")&&!1===_.update_urls.shortcode.list||history.replaceState({tribe_params:u,tribe_url_params:r.params},t.title,location.href),a(e).on("popstate",function(e){var t=e.originalEvent.state;t&&!o.length&&(n.do_string=!1,n.pushstate=!1,n.popping=!0,n.params=t.tribe_params,n.url_params=t.tribe_url_params,s.pre_ajax(function(){g()}),s.set_form(n.params))})}function b(e){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),n.ajax_running)return;var a=t.location.pathname;if(n.paged=1,a.match(/\/all\/$/))n.view="all";else{var r=tribeUtils.getQueryVars().tribe_event_display;n.view=void 0!==r?r:"list"}n.popping=!1,s.pre_ajax(function(){g()})}}function g(){var v=a("#tribe-events-header");if(n.ajax_running=!0,!n.popping){n.filter_cats&&(r.cur_url=v.data("baseurl"));var o=a("#tribe-events-list-hash").val();if(n.params={action:"tribe_list",tribe_paged:n.paged,tribe_event_display:n.view,featured:s.is_featured()},n.url_params={tribe_paged:n.paged,tribe_event_display:n.view},(t.location.pathname.match(/\/all\/$/)||r.cur_url.match(/tribe_post_parent=[0-9]+/))&&(n.url_params.tribe_event_display="past"===n.url_params.tribe_event_display?"past":"all",n.params.tribe_post_parent=parseInt(v.closest("#tribe-events-content").find("[data-parent-post-id]:first").data("parent-post-id"),10)),""===tribe_js_config.permalink_settings&&(n.url_params.eventDisplay="all"===n.url_params.tribe_event_display?"all":"list"),o.length&&(n.params.hash=o),r.default_permalinks&&!n.url_params.hasOwnProperty("post_type")&&(n.url_params.post_type=_.events_post_type),n.category&&(n.params.tribe_event_category=n.category),a(i).trigger("tribe_ev_serializeBar"),s.invalid_date_in_params(n.params))return void(n.ajax_running=!1);a("#tribe-events-content .tribe-events-loop").tribe_spin(),n.params=a.param(n.params),n.url_params=a.param(n.url_params),a(i).trigger("tribe_ev_collectParams"),n.pushstate=!1,n.do_string=!0}p.pushstate&&!n.filter_cats?(l&&tec_debug.time("List View Ajax Timer"),a(i).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_listView_AjaxStart"),a.post(TribeList.ajaxurl,n.params,function(e){if(n.initial_load=!1,s.enable_inputs("#tribe_events_filters_form","input, select"),e.success){n.ajax_running=!1,r.ajax_response={total_count:parseInt(e.total_count),view:e.view,max_pages:e.max_pages,tribe_paged:e.tribe_paged,timestamp:(new Date).getTime()},a("#tribe-events-list-hash").val(e.hash);var p=a.parseHTML(e.html);a("#tribe-events-content").replaceWith(p),0===e.total_count&&a("#tribe-events-header .tribe-events-sub-nav").empty(),n.page_title=a("#tribe-events-header").data("title"),n.view_title=a("#tribe-events-header").data("viewtitle"),t.title=n.page_title,a(".tribe-events-page-title").html(n.view_title);var v=!a(t.getElementById("tribe-events")).is(".tribe-events-shortcode")||!1!==_.update_urls.shortcode.list;n.do_string&&v&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,r.cur_url+"?"+n.url_params),n.pushstate&&v&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,r.cur_url),a(i).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_listView_AjaxSuccess"),a(i).trigger("ajax-success.tribe").trigger("tribe_ev_listView_AjaxSuccess"),l&&tec_debug.timeEnd("List View Ajax Timer")}})):n.url_params.length?e.location=r.cur_url+"?"+n.url_params:e.location=r.cur_url}a("#tribe-events-content-wrapper,.tribe-events-view-wrapper").on("click",'ul.tribe-events-sub-nav a[rel="next"]',function(e){if(e.preventDefault(),!n.ajax_running){var t=a(this).attr("href"),i=/tribe_event_display=([^&]+)/gi,p=i.exec(t);a(this).parent().is(".tribe-events-past")?n.view="past":p&&void 0!==p[1]?n.view=p[1]:n.view="list",r.cur_url=s.url_path(t),(p=(i=/tribe_paged=([^&]+)/gi).exec(t))&&void 0!==p[1]?n.paged=p[1]:"list"===n.view?n.paged?n.paged++:n.paged=2:n.paged?n.paged--:(n.view="list",n.paged=1),n.popping=!1,s.pre_ajax(function(){g()})}}).on("click",'ul.tribe-events-sub-nav a[rel="prev"]',function(e){if(e.preventDefault(),!n.ajax_running){var t=a(this).attr("href"),i=/tribe_event_display=([^&]+)/gi,p=i.exec(t);a(this).parent().is(".tribe-events-past")?n.view="past":p&&void 0!==p[1]?n.view=p[1]:n.view="list",p=(i=/tribe_paged=([^&]+)/gi).exec(t),r.cur_url=s.url_path(a(this).attr("href")),p&&void 0!==p[1]?n.paged=p[1]:"list"===n.view?n.paged>1?n.paged--:(n.paged=1,n.view="past"):n.paged++,n.popping=!1,s.pre_ajax(function(){g()})}}),a("#tribe-events.tribe-events-shortcode").length?s.snap("#tribe-events","#tribe-events","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"):s.snap("#tribe-events-content-wrapper","#tribe-events-content-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),(p.no_bar()||p.live_ajax()&&p.pushstate)&&a("#tribe-events-bar").on("changeDate","#tribe-bar-date",function(e){p.reset_on()||(n.popping=!1,b(e))}),a("form#tribe-bar-form").on("submit",function(e){n.popping=!1,b(e)}),a(i).on("tribe_ev_runAjax",function(){g()}),l&&tec_debug.info("TEC Debug: tribe-events-ajax-list.js successfully loaded"),n.view&&l&&tec_debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);