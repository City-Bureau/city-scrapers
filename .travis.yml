language: python
python:
  - "3.5"
  - "3.6"
  - "3.7"
sudo: required
env:
  global:
    - PIPENV_VENV_IN_PROJECT=1
    - PIPENV_IGNORE_VIRTUALENVS=1
services:
  - docker
install:
  - pip install pipenv
  - pipenv install --dev --three --system
script:
  - isort --check-only --diff || exit 1
  - flake8
  - pytest
  - ./travis/validate_spiders.sh
deploy:
  - skip_cleanup: true
    provider: script
    script: ./deploy/deploy_acr.sh
    on:
      branch: master
